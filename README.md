# Описание тестового задания на позицию backend разработчика

## Цель
Нашему отделу пришла задача - считать зону покрытия сотовых вышек. 
- Фронтендерам нужно api для конвертации точек в полигоны с заданным радиусом.
- Аналитикам требуется в реальном времени отсматривать все поступающие запросы в гугл-таблице.

## Задача
Реализовать api-сервис на FastAPI. В нем должен быть метод, который на входе принимает координаты точки в системе EPSG:4326 и радиус в метрах, а на выходе дает GeoJSON с "круглым" полигоном (с соответствующим радиусом и центром в указанных координатах). При каждом вызове метода нужно заносить в гугл-таблицу информацию: дата и время вызова метода, координаты, радиус, площадь покрытия.

## Условия
1. Входящие данные должны валидироваться и оповещает клиент соответствующей ошибкой, если данные не прошли валидацию
2. Сделать имитацию, что это "долгий" запрос (время ответа >5с). При этом вызов с одного клиента не должен блокировать запрос для другого клиента
3. Запросы должны кэшироваться в базу данных postgres. Если запрос повторный - возвращаются данные из кэша без задержки
4. Гугл-таблица создается кандидатом с свободной форме, с настроенным доступом на просмотр.

## Ожидаемый результат
Форк этого репозитория на личном аккаунте github/gitlab кандидата. В нем должно быть описанное выше приложение python, которое будет готово к работе после развертывания виртуального окружения и установки зависимостей. Опционально - подготовить пакет к контейнеризации в docker

## Критерии оценки
Проверяться будет:
- работоспособность и соответствие ТЗ
- общий стиль кода (соблюдение PEP, базовых принципов программирования, документирование кода, наименование переменных и т.д.)


# GeoPolygon API

FastAPI приложение для создания полигонов покрытия сотовых вышек.

## Установка и запуск

1. Создайте виртуальное окружение:
```bash
python -m venv venv
source venv/bin/activate  # Linux/Mac
# или
venv\Scripts\activate  # Windows
```

2. Установите зависимости:
```bash
pip install -r requirements.txt
```

3. Запустите приложение:
```bash
python main.py
```

Или через uvicorn:
```bash
uvicorn app.main:app --reload
```

## API Endpoints

- `GET /` - главная страница
- `GET /health` - проверка доступности сервиса
- `POST /polygon` - создание полигона покрытия

### Создание полигона

**POST** `/polygon`

**Тело запроса:**
```json
{
  "latitude": 55.7558,
  "longitude": 37.6176,
  "radius": 1000
}
```

**Ответ:**
```json
{
  "type": "Feature",
  "geometry": {
    "type": "Polygon",
    "coordinates": [[[...]]]
  },
  "properties": {
    "center": [37.6176, 55.7558],
    "radius": 1000,
    "area_sqm": 3141592.65,
    "cached": false
  }
}
```

## Особенности реализации

- **Валидация**: координаты и радиус валидируются на входе
- **Асинхронность**: запросы не блокируют друг друга
- **Имитация долгого запроса**: новые запросы обрабатываются 5+ секунд
- **Точная геометрия**: используется UTM проекция для создания точных круговых полигонов
- **Расчет площади**: площадь вычисляется в квадратных метрах

## Документация API

После запуска Swagger доступен по адресу: http://localhost:8000/docs 